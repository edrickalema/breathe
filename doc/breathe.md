This is a comprehensive development guide for building Breathe, a digital wellbeing mobile app for Android using React Native + Expo for the UI layer and custom Kotlin native modules for deep system integration.Core Purpose: Help users manage phone distractions through intentional snoozing, an emotional companion character, doomscrolling detection, focus sessions, and behavioral insights.Prerequisites & SetupRequired Tools

Node.js (18 or higher)
npm or yarn package manager
Expo CLI installed globally
Android Studio (for testing and future native module development)
Git for version control
Initial Project Setup Commands
Create a new Expo project with TypeScript template using tabs structure. Install all required dependencies including React Native Reanimated, Gesture Handler, Expo Haptics, Linear Gradient, Blur, Zustand for state management, React Native SVG, Expo SQLite, and Lucide React Native for icons.Configure Babel to include the Reanimated plugin as the last plugin in the configuration. Set up TypeScript with strict mode and path aliases for cleaner imports. Configure app.json for dark theme only, Android-specific settings, and future notification capabilities.Project Architecture OverviewFile Structure Philosophy
Organize the project with a clear separation of concerns: app directory for all screens using Expo Router's file-based navigation, components directory organized by feature (companion, focus, timeline, insights, overlays, UI elements), constants for design system values, store for Zustand state management split into logical slices, utils for helper functions and business logic, and hooks for reusable React logic.Navigation Structure
Use Expo Router with a tab-based layout containing four main tabs: Home (companion and quick actions), Timeline (snoozed items), Focus (focus sessions), and Insights (analytics). Settings lives as a separate stack screen. Modals for add snooze, mood breakdown, and session completion should be implemented as modal routes.State Management Strategy
Implement Zustand as the global state manager with persistence to AsyncStorage. Split the store into logical slices: companion state (mood, score, history), deferred items state (CRUD operations), focus session state (active session tracking), doomscroll state (overlay visibility, current session), and settings state (user preferences). Use selectors for performance optimization.Design System ImplementationColor Palette
Define a comprehensive dark-themed color system with deep blue-black background, navy surface colors for cards, cyan primary color for actions and focused states, coral accent for secondary actions, semantic colors for success/warning/danger, text hierarchy with primary/secondary/tertiary shades, transparent borders and dividers, and seven distinct mood colors for the companion character (green for calm, cyan for focused, yellow for tired, orange for scattered, red for warning, purple for proud, gray for sleeping).Typography System
Create a type scale with five heading levels from large display text to small subheadings, body text in regular and bold weights with large variant option, caption and small text for metadata, special button and label styles with uppercase transforms and letter spacing. All typography should include fontSize, fontWeight, lineHeight, and letterSpacing values for consistency.Spacing & Layout
Establish a consistent spacing scale using multiples of four pixels: extra small for tight spacing, small for component gaps, medium for standard padding, large for section separation, extra large for major divisions, and very large for screen-level spacing. Define border radius values from small rounded corners to fully circular elements. Create elevation presets using shadow properties for depth.Component Patterns
Build a library of reusable UI components: primary/secondary/outline/ghost button variants with loading states and haptic feedback, card components with configurable padding and elevation, toggle switches with animated transitions, custom sliders for value selection, empty state displays with icons and messages, loading skeletons with shimmer effects.Data Models & TypesCore Data Structures
Define TypeScript interfaces for all domain objects. DeferredItem should include unique ID, type (app/notification/link/task), display information (title, icon, content), timing (snooze time, return time), user intent (reason), completion status, early access tracking, and timestamps. FocusSession needs session identification, time tracking (start, end, planned vs actual duration), session type classification, completion and interruption status, blocked apps list, productivity scoring, optional reflection notes. MoodLog captures timestamp, mood state, numerical score, contextual metrics (screen time, app switches, doomscroll minutes, focus minutes), and trigger events.State Shape
The global store should maintain current companion state (mood and score), complete mood history array, all deferred items in a flat list, active focus session if running, historical focus sessions, doomscroll overlay visibility and current session data, app usage statistics, weekly insight summaries, computed real-time stats (today's screen time and focus time, weekly totals, snooze adherence percentage), user settings object, and UI state (loading flags, last sync timestamp).Computed Values
Implement derived state calculations: real-time countdown timers for deferred items, snooze adherence percentage based on early opens versus total items, daily and weekly aggregations of screen time and focus time, mood score calculations from behavior patterns, intervention level determination based on scrolling patterns.Component ArchitectureCompanion Character System
The companion is the emotional heart of the app. Build it as three layered components: the eye SVG graphic with dynamic pupil positioning based on mood, the glow effect using animated views with mood-colored shadows, and the container that orchestrates breathing animations. The eye should be simple but expressive—outer circle for eye white, inner circle for pupil with color matching mood state, small highlight circle for depth. Sleeping state shows closed eye as horizontal ellipse. Breathing animation uses subtle scale oscillation between 1.0 and 1.05 over two seconds continuously.Mood colors directly map to state: calm uses success green with relaxed expression, focused uses primary cyan with centered gaze, tired uses warning yellow with droopy pupil position, scattered uses orange with rapid subtle movements, warning uses danger red with enlarged pupils, proud uses purple with sparkle effects, sleeping uses gray with closed eye. All transitions between moods should animate smoothly over two seconds.Timeline Components
Timeline items display as cards with horizontal layout: app icon or emoji on left side in circular container, content section showing title, return time, user's stated reason in italic quotes, countdown timer with clock icon, action buttons for edit and delete. Support swipe gestures—left swipe reveals delete, right swipe reveals complete. Animate entrance with staggered fade-in for visual polish.The NOW marker creates temporal division with horizontal line, animated pulsing dot, and label. Position between upcoming and past sections. Pulse animation should be subtle, varying opacity between thirty and one hundred percent over one second cycles.Focus Timer Component
Build a circular progress timer using SVG circles with animated stroke properties. Outer ring shows remaining progress using strokeDasharray and strokeDashoffset animated with Reanimated. Inner area displays time remaining in MM:SS format with large readable typography. Small companion eye in center reflects focused state. Animate progress smoothly—update stroke offset every second based on elapsed time percentage. Include subtle haptic feedback on minute milestones.Session type selector uses horizontal pill buttons for Pomodoro, Deep Work, Quick Focus, and Custom options. Selected state shows primary color fill, unselected uses outline style with transparent background. Tap any pill to select, triggering haptic selection feedback.Doomscroll Intervention Overlay
This critical feature appears as full-screen modal with blur backdrop. Cannot be dismissed by tapping outside or back button initially. Layout from top to bottom: companion showing warning state with orange glow, message stating app name and duration scrolled, breathing circle with continuous scale animation (0.8 to 1.0 over four seconds), instruction text prompting three breaths, primary action button to take break (snoozes app 30 minutes), secondary outline button for five more minutes, divider line, small text link requiring three-second long press to dismiss.Breathing circle should be large, semi-transparent primary color, smoothly animating to guide user breathing. Long press to dismiss shows circular progress ring filling over three seconds before allowing dismissal—creates intentional friction to make user pause and consider.Stats and Insights Components
Stats cards display single metrics in compact cards with icon, large value display, descriptive label, and optional trend indicator. Use color-coded icons matching metric type. Trend arrows show percentage change with green for improvement, red for concern.Mood chart visualizes seven days of mood scores as line graph. X-axis shows day abbreviations, Y-axis spans 0-100 score range. Line color should gradient from red (low scores) to green (high scores). Plot dots at data points, allow tapping dots to see details for that day.Top apps list ranks most-used apps with horizontal bar charts. Each item shows app name, time spent, and colored progress bar representing percentage of total usage. Limit to top five apps for focused display.Screen ImplementationsHome Screen Flow
Display is vertically divided into three main sections. Top section (approximately forty percent of screen height) centers large companion character. Below companion show current mood label as text, numerical mood score out of one hundred, and subtle hint to tap for details. This section uses generous padding and breathing room.Middle section contains two full-width action buttons with medium gap between them. Start Focus Session button uses primary cyan background, Snooze Something uses accent coral background. Both buttons have consistent 56-pixel height with rounded corners.Bottom section shows horizontal scrolling quick stats. Three cards display Today's Focus time, Screen Time, and Snooze Adherence percentage. Each card is 160 pixels wide with icon, value, and label. Allow horizontal scrolling to accommodate varying screen sizes.Implement staggered entrance animations—companion fades in first, then action buttons slide up, finally stats cards appear with delay. This creates pleasant progressive reveal.Timeline Screen Flow
Begins with section title "Returning Soon" for items coming back within next few hours. Each deferred item renders as timeline card sorted by return time (nearest first). NOW marker appears between upcoming and completed sections with animated pulse. Below marker, "Completed" section shows recently finished items in reverse chronological order (newest first), limited to five items to prevent cluttering.Support pull-to-refresh gesture—when user pulls down, trigger refresh animation and recalculate all countdown timers. Empty state when no items exists shows friendly illustration or large emoji, message "No snoozed items yet", and call-to-action button to snooze something.Each timeline item card updates its countdown timer every minute automatically. When return time arrives, item should visually indicate it's ready (perhaps pulse gently) and could trigger local notification.Focus Session Screen States
Screen has two distinct states—setup mode before session starts, and active mode during session.Setup mode displays session type selector pills at top, large preview of selected duration in center (massive 72-pixel font showing MM:SS), informational card explaining what happens during focus (blocked apps, silenced notifications, companion state change, gentle end reminder), and prominent start button at bottom.Active mode shows large circular timer with animated progress ring consuming most of screen height, companion eye inside timer circle showing focused state, status text below timer, list of blocked apps shown as small chips, pause button as outline variant, and end early option as subtle text link requiring confirmation.Timer automatically counts down from selected duration. On completion, trigger celebration animation, play success sound, and show session summary modal with productivity score, option to add reflection note, and encouragement message.Insights Screen Layout
Top has week selector with tabs for This Week, Last 7 Days, Last 30 Days. Below that, two-by-two grid of key metric cards showing Screen Time, Focus Time, Doomscroll count, and Adherence percentage. Each displays current value and trend arrow indicating change from previous period.Mood Journey chart visualizes mood score over selected time period as line graph with area fill. This takes substantial screen real estate as it's the primary visualization.Below chart, Top Apps section lists most distracting apps with usage time and percentage bars. Each app shows icon (emoji), name, time spent, and colored bar proportional to usage.At bottom, pattern insights display as individual cards with emoji icons and brief observations: "You doomscroll most on Sunday evenings", "Your focus sessions are forty percent longer this month", "You open Twitter within ten minutes of waking up six days a week". These insights are generated from analyzing usage patterns.Settings Screen Organization
Group settings into logical sections with card-based layout. Each section has header and related options grouped together.Doomscroll Detection section: master toggle to enable/disable, sensitivity selector (lenient/balanced/strict pills), intervention style selector (gentle/progressive/aggressive), list of apps to monitor with individual toggles, button to add custom healthy alternatives list.Focus Settings section: default session duration picker, break length picker, toggle for auto-blocking apps, focus mode schedule configuration.General section: faith-based mode toggle (shows biblical encouragement if enabled), night mode schedule with start/end time pickers, notification sound selector, haptic feedback toggle.Data & Privacy section: export all data button, clear history with confirmation dialog, button to review permissions granted.About section: app version display, credits, link to privacy policy, send feedback button that opens email composer.Business Logic ImplementationMood Calculation Algorithm
Calculate companion mood score based on weighted factors. Start with base score of fifty (neutral). Add points for positive behaviors: focus time adds up to thirty points (one point per two minutes capped at thirty), high snooze adherence adds up to twenty-five points (adherence percentage minus fifty, divided by two). Subtract points for concerning behaviors: screen time subtracts up to twenty points (one point per ten minutes), doomscrolling subtracts five points per incident, app switching frequency subtracts half point per switch, late night usage (11 PM to 5 AM) subtracts ten points.Clamp final score between zero and one hundred. Map score ranges to mood states: eighty-plus is proud, sixty-five to eighty is calm, fifty to sixty-five is focused, thirty-five to fifty is tired, twenty to thirty-five is scattered, below twenty is warning. Maintain rolling average to prevent jarring mood swings—new score should be weighted seventy percent with previous score weighted thirty percent.Doomscrolling Detection Logic
Track scroll events per app session including timestamp, scroll delta (pixels), and velocity (pixels per second). Maintain state for each app: session start time, accumulated scroll events, interaction count (taps/clicks), refresh count (pull-to-refresh actions).Detection thresholds vary by sensitivity setting. For balanced sensitivity: warning level triggers after twelve minutes continuous scrolling OR high velocity (over 300 pixels per second) for seven minutes OR low interaction ratio (under ten percent interactions) for ten minutes. Strong warning triggers after twenty-five minutes OR five refreshes OR continuing after first warning. Block level triggers after forty-five minutes OR continuing after strong warning OR late night scrolling over thirty minutes.Adjust thresholds for lenient mode (longer durations before intervention) and strict mode (shorter durations, more aggressive). Consider contextual factors: late night usage more heavily weighted, weekends slightly more lenient, consecutive day patterns inform future sensitivity.Focus Session Management
When starting session, record start timestamp, planned duration, session type, and apps to block. Create foreground notification showing timer progress. Optionally schedule reminder notification for two minutes before session ends.During active session, update local state every second for timer display. Block access to selected apps—in full native implementation this uses accessibility service to intercept app launches, but for initial React Native-only version, simulate blocking by showing modal overlay when user would open blocked app.On session completion (timer reaches zero), calculate actual duration, determine productivity score (actual divided by planned times one hundred, capped at one hundred), show celebration animation, allow reflection note entry, update global stats, save session to history, update companion mood positively.On early termination, record interruption, require reason selection, calculate partial productivity score, update companion mood slightly negatively, still save session for pattern analysis.Deferred Item Lifecycle
When creating deferred item, user selects type (app/notification/link/task), provides title and description, chooses return time (with smart suggestions like "tonight at 8 PM", "tomorrow morning", "in 2 hours"), states reason for deferring. Generate unique ID, store current timestamp as snooze time, save to database, schedule local notification for return time, hide or block the deferred content.Return time monitoring checks every minute for items ready to resurface. When item's return time arrives, trigger local notification with custom sound, update item status to ready, optionally auto-open the item based on settings, log successful deferral for adherence calculation.If user attempts to access deferred item before return time, show intervention overlay with companion in warning state, display countdown to scheduled return, show user's stated reason, offer options to open anyway (logs early open), extend snooze by 15 minutes, or cancel and respect original schedule. Log early access attempts for pattern analysis.Weekly Insights Generation
Every Sunday evening, aggregate past seven days of data. Calculate total screen time, total focus time, doomscroll incident count, snooze adherence percentage, identify top five most-used apps with time breakdowns, compute average mood score, detect patterns (most common doomscroll day/time, focus session success rate trends, commonly snoozed apps).Generate natural language insights based on patterns: if user doomscrolls primarily Sunday evenings, note this with suggestion to plan alternative activity. If focus sessions consistently shorter on certain days, identify that pattern. If specific app always opened early, flag it for discussion.Present weekly digest as in-app notification and dedicated digest screen. Allow user to dismiss insights or mark as addressed. Store historical digests for month-over-month comparison.Animation SpecificationsCompanion Animations
Breathing animation runs continuously using shared value that oscillates. Scale from 1.0 to 1.05 over two seconds, then back to 1.0 over two seconds, repeating infinitely. Use ease-in-out timing for natural breathing feel.Mood transitions animate smoothly over two seconds. Glow color cross-fades between mood colors. Pupil position and size changes should interpolate. For proud state, add sparkle particles that briefly appear then fade.Occasional blink animation triggers randomly every five to ten seconds. Pupil height compresses to thin line over 150 milliseconds, holds for 50 milliseconds, then expands back over 150 milliseconds.Screen Transitions
Page navigation uses slide animations. Forward navigation slides new page from right. Back navigation slides current page to right revealing previous. Duration 300 milliseconds with ease-out curve.Modal presentations slide up from bottom with backdrop fade. Modal enters over 400 milliseconds. Dismissal reverses animation.Component Micro-interactions
Button press: scale down to 0.95 immediately on press in, spring back to 1.0 on release. Include medium haptic feedback on press.Card press: subtle lift effect using transform translateY negative two pixels and increase shadow. Animate over 150 milliseconds.Toggle switch: sliding circle moves across track with spring physics. Background color cross-fades between inactive and active colors over 200 milliseconds.Progress bars and rings: animate using Reanimated's withTiming. Update every second for timers. Use linear timing for consistent feel.List Animations
Stagger item entrance: each item delays by 50-100 milliseconds after previous. Use FadeInRight or SlideInRight animations.Item removal: scale down to zero while fading out over 200 milliseconds. Remaining items smoothly animate to fill space.Pull-to-refresh: custom spinner animation with companion eye that opens wider as pull increases, then blinks when refresh triggers.User Interaction PatternsHaptic Feedback Strategy
Light impact for: button taps, toggle switches, selection changes, navigation taps.Medium impact for: completing actions, confirming choices, deleting items, ending sessions.Heavy impact for: critical actions, errors prevented, major state changes.Success notification for: session completion, adhering to snooze, weekly streak milestones.Warning notification for: attempting to open snoozed apps, breaking focus session, ignoring interventions.Error notification for: action failures, data not saved, permission issues.Selection feedback for: picker scrolling, slider adjustments, list selection.Gesture Controls
Standard taps for primary actions. Long press (500+ milliseconds) for contextual menus or destructive actions requiring confirmation.Swipe left on timeline items reveals delete button. Swipe right reveals complete button. Swipe distance threshold 60 pixels minimum.Three-finger swipe down anywhere in app triggers quick 25-minute focus session (power user feature, optional in settings).Pinch to zoom on mood chart for detailed view. Double-tap to reset zoom.Pull down on scrollable screens triggers refresh. Pull distance threshold 80 pixels with spring resistance.Empty States
Each screen with potential empty state needs custom messaging. Timeline empty: show calendar icon, "No snoozed items yet", with "Snooze Something" button. Focus history empty: show target icon, "Start your first focus session", with "Begin Focus" button. Insights empty: show chart icon, "Use Breathe for a week to see insights", with current day counter.Empty states should feel encouraging, not judgmental. Use warm, friendly copy that acknowledges the state is temporary and shows the path forward.Data Persistence StrategyLocal Storage Approach
Use AsyncStorage through Zustand's persist middleware. Automatically save state changes with debouncing to prevent excessive writes. Serialize state to JSON, handling dates carefully (store as timestamps, rehydrate as Date objects).Persist these store slices: deferred items array, focus sessions history (last 30 days), mood history (last 90 days), doomscroll sessions (last 30 days), user settings, current mood state. Do NOT persist: active focus session (should clear on app restart), UI loading states, temporary overlays.Database Schema (SQLite)
For production, migrate to SQLite for better query performance. Create tables: deferred_items (with indices on return_time and completed status), focus_sessions (with indices on start_time), mood_logs (with index on timestamp), doomscroll_sessions (with indices on app_name and start_time), app_usage_daily (with composite index on date and app_name), user_settings (single row, simple key-value pairs).Use WatermelonDB for elegant reactive queries, automatic sync, and excellent TypeScript support. Migrations handled through numbered migration files.Data Export Feature
Implement full data export as JSON file. Include all user data: complete deferred items history, all focus sessions, mood logs, doomscroll sessions, aggregated statistics, user settings (excluding device-specific values). Format JSON with indentation for readability. Allow user to share via system share sheet or save to device storage.Import functionality to restore from export: validate JSON structure, merge with existing data (no duplicates), resolve conflicts by preferring imported data, show summary of imported items.Performance OptimizationRendering Optimization
Memoize expensive components using React.memo, especially timeline items, stats cards, mood charts. Use useCallback for function props passed to children. Use useMemo for computed values derived from store state.Implement virtual lists for any list exceeding 20 items. Use FlatList with windowSize optimization, initialNumToRender of 10, maxToRenderPerBatch of 5. For timeline, implement sections using SectionList for better performance with grouped data.Lazy load heavy components: delay loading mood chart until user navigates to insights tab, defer image loading until visible, code-split large utility functions.Animation Performance
Always use Reanimated worklets for animations running on UI thread. Avoid JavaScript-based animations for continuous effects. Use useSharedValue for animated values, useAnimatedStyle for style updates.Reduce animation complexity on lower-end devices: detect device performance tier using DeviceInfo, simplify companion animations, reduce particle effects, use simpler transitions.Profile with Flipper to identify slow renders. Monitor frame rate, watch for dropped frames during animations, check for unnecessary re-renders.Data Management
Implement pagination for historical data: load most recent 50 items initially, load older items on scroll. Archive data older than 90 days to separate cold storage table.Debounce frequent updates: mood score calculations every 5 minutes not every second, timer updates batched, search queries debounced by 300 milliseconds.Cache computed values: daily totals calculated once per day and cached, weekly aggregations cached until week changes, chart data transformed once and stored.Testing StrategyComponent Testing
Test each component in isolation. Companion should render correctly in all mood states, animate smoothly, respond to taps. Button component should handle all variants, show loading state, trigger haptic feedback, handle disabled state.Use React Native Testing Library for component tests. Mock Reanimated animations in tests. Snapshot test for UI consistency across changes.Integration Testing
Test complete user flows: creating deferred item should save to store, schedule notification, update timeline. Starting focus session should update active session state, trigger timer, show active UI. Completing session should calculate score, save to history, update stats.Mock navigation, AsyncStorage, and haptic feedback in integration tests. Verify state changes propagate correctly through store.User Acceptance Testing
Manual testing scenarios: can user successfully snooze an app and see it return at scheduled time? Does companion mood update appropriately as behavior changes? Do focus sessions track time accurately and allow early exit? Are doomscroll interventions triggered at correct thresholds?Beta testing with 20-30 users collecting feedback on: companion personality (too aggressive? not helpful enough?), intervention timing (too early? too late?), UI clarity (confusing elements?), performance (laggy animations?).Development PhasesPhase 1: Foundation (Weeks 1-2)
Set up Expo project with TypeScript. Configure Babel for Reanimated. Create design system constants. Implement basic navigation structure with empty screens. Build companion component with three mood states (calm, focused, tired). Set up Zustand store with persistence. Create basic button and card components. Get app running on physical device for testing.Phase 2: Core Features (Weeks 3-5)
Implement deferred items: add item flow with form, store CRUD operations, timeline screen displaying items, countdown timers updating, local notifications for returns. Build focus session system: session setup screen, timer component with circular progress, active session UI, completion flow, session history storage. Basic stats calculation for home screen.Phase 3: Intelligence Layer (Weeks 6-7)
Enhance companion with full mood system: mood calculation algorithm, seven mood states with animations, mood history tracking, transitions between states. Implement doomscrolling detection: simulated scroll tracking, intervention triggers, overlay with breathing exercise, response logging. Create insights screen with charts and pattern detection.Phase 4: Polish & Testing (Week 8)
Comprehensive animations throughout app. Haptic feedback on all interactions. Empty states for all screens. Loading states and error handling. Onboarding flow explaining features. Settings screen with all configurations. Icon and splash screen. Beta testing and bug fixes.Phase 5: Native Modules (Post-MVP)
Develop Kotlin accessibility service for true app blocking. Implement usage stats tracking. Create notification listener service. Build alarm manager integration for precise scheduling. Bridge all native functionality to JavaScript. Test thoroughly on various Android versions.Future EnhancementsCross-Device Sync
Implement optional cloud backup using Firebase or Supabase. End-to-end encrypt user data before upload. Sync deferred items, settings, and preferences across devices. Conflict resolution favoring most recent edit. Allow sync enable/disable per device.Advanced Analytics
Machine learning model to predict when user likely to doomscroll. Personalized intervention timing based on success history. Anomaly detection for concerning behavior patterns. Predictive insights: "You usually doomscroll after stressful work meetings—want to schedule a walk instead?"Social Features
Anonymous community patterns: "Eighty-seven percent of Breathe users struggle with evening doomscrolling too". Optional accountability partners who can see your adherence stats. Shared focus sessions for group studying or work. Weekly challenges with leaderboards.Integrations
Calendar integration: automatically schedule focus sessions around meetings, snooze apps during calendar events labeled "focus time", suggest breaks between back-to-back meetings.Health app integration: correlate phone usage with sleep quality, activity levels, heart rate variability. Provide insights on digital wellbeing's impact on physical health.Automation platform support: Tasker, IFTTT, Shortcuts integration for power users. Trigger focus sessions based on location, time, calendar events. Auto-snooze apps based on rules.Companion Personality
Customizable companion appearance: choose different character designs, unlock new designs through milestones. Named companion with persistent personality. Voice feedback option using text-to-speech. More expressive animations responding to specific events.Wellness Features
Guided meditations accessible from intervention overlays. Gratitude journaling integrated with reflection prompts. Screen-free activity suggestions based on time of day, weather, location. Pomodoro break exercises (stretches, breathing, eye rest).